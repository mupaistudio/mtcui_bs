{# DOCTYPE를 페이지별로 설정할 수 있게 합니다 #}
{%- block doctype %}<!DOCTYPE html>{% endblock doctype -%}

{# <html> 태그에 사용자 정의 속성을 추가할 수 있게 합니다 #}
{%- block htmltag -%}
{% set lang = h.lang() %}
<!--[if IE 9]> <html lang="{{ lang }}" class="ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html lang="{{ lang }}" {% if h.is_rtl_language()  %} dir="rtl" {% endif %} > <!--<![endif]-->
{%- endblock htmltag -%}

  {# <head> 태그에 사용자 정의 속성을 추가할 수 있게 합니다 #}
  <head{% block headtag %}{% endblock headtag %}>
    {#
    페이지에 사용자 정의 메타 태그를 추가합니다. 기본 태그(문자셋, 뷰포트, 생성기 등)를
    가져오려면 super()를 호출하세요.

    Example:

    {% block meta %}
      {{ super() }}
      <meta name="description" value="My website description" />
    {% endblock %}

    #}
    {%- block meta -%}
      <meta charset="utf-8" />
      <meta name="csrf_field_name" content="{{ g.csrf_field_name }}" />
      <meta name="{{ g.csrf_field_name }}" content="{{ csrf_token() }}" />

      {% block meta_generator %}<meta name="generator" content="ckan {{ h.ckan_version() }}" />{% endblock meta_generator %}
      {% block meta_viewport %}<meta name="viewport" content="width=device-width, initial-scale=1.0">{% endblock meta_viewport %}
    {%- endblock meta -%}

    {#
    title 블록을 확장하여 페이지에 사용자 정의 제목을 추가합니다. 
    기본 페이지 제목을 가져오려면 super()를 호출하세요.

    Example:

      {% block title %}My Subtitle - {{ super() }}{% endblock %}

    #}

    <title>
      {%- block title -%}
        {%- block subtitle %}{% endblock subtitle -%}
        {%- if self.subtitle()|trim %} {{ g.template_title_delimiter }} {% endif -%}
        {{ g.site_title }}
      {%- endblock title -%}
    </title>

    {#
    links 블록을 사용하면 메타 블록과 동일한 방식으로 스타일시트 이전에
    RSS 피드나 파비콘과 같은 추가 콘텐츠를 추가할 수 있습니다.
    #}
    {% block links -%}
      <link rel="shortcut icon" href="{{ g.favicon }}" />
    {% endblock links -%}

    {#
    styles 블록을 사용하면 메타 블록과 동일한 방식으로 페이지에 추가 스타일시트를
    추가할 수 있습니다. 기본 스타일시트를 포함하려면 super()를 사용하세요.

    Example:

      {% block styles %}
        {{ super() }}
        <link rel="stylesheet" href="/base/css/custom.css" />
      {% endblock styles %}
    #}

    <!-- Start TEST -->
    {%- block styles %}
      {% set theme = h.get_rtl_theme() if h.is_rtl_language() else g.theme %}
      {% asset theme %}
      {% asset 'mtcui/mtcui-css' %}
    {% endblock styles %}
    <!-- End TEST -->

    {# styles 블록에 포함된 모든 asset을 렌더링합니다 #}
    {{ h.render_assets('style') }}
    {%- block custom_styles %}
      {%- if g.site_custom_css -%}
      <style>
        {{ g.site_custom_css | safe }}
      </style>
      {%- endif %}
    {% endblock custom_styles %}

    {%- block head_extras %}
    {% endblock head_extras %}

  </head>

  {# <body> 태그에 사용자 정의 속성을 추가할 수 있게 합니다 #}
  <body{% block bodytag %} data-site-root="{{ h.url_for('home.index', locale='default', qualified=true) }}" data-locale-root="{{ h.url_for('home.index', qualified=true) }}" {% endblock bodytag %}>
    <!-- Start Page -->
    {%- block page %}{% endblock page -%}
    <!-- End Page -->

    {#
    스크립트 추가에 이 블록을 사용하지 마세요
    특별한 경우를 제외하고 스크립트는 {% assets %} 태그를 사용하여 로드해야 합니다
    #}
    {%- block scripts %}
    {% endblock scripts -%}

    {# scripts 블록과 다른 곳에 포함된 모든 asset을 렌더링합니다 #}
    {# 이 시점 이후에는 `asset` 태그를 호출하지 마세요 #}
    {{ h.render_assets('style') }}
    {{ h.render_assets('script') }}
  </body>
</html>
